<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8" />
<title>Teste – Assincronias Ventilatórias</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0" />

<style>
  body { font-family: Arial, sans-serif; padding: 20px; background:#fff; color:#111827; }
  h1 { font-size: 22px; margin: 0 0 6px; }
  p { color:#4b5563; margin: 0 0 16px; line-height:1.4; }

  .card { border:1px solid #e5e7eb; border-radius:10px; padding:14px; margin-bottom:14px; background:#f9fafb; }
  label { font-weight:700; display:block; }
  .legend { font-size:13px; color:#374151; margin-top:6px; line-height:1.4; }

  .controls { margin-top:10px; padding-top:10px; border-top:1px dashed #d1d5db; display:none; }
  select { margin-top:6px; font-size:14px; }

  .radio-line { display:flex; gap:14px; flex-wrap:wrap; margin-top:8px; }
  .radio-line label { font-weight:400; color:#111827; }

  button { padding:10px 14px; font-size:16px; margin-top:8px; cursor:pointer; }

  .resultado { margin-top:20px; font-weight:700; }
  .detalhes { margin-top:12px; font-weight:400; }
  ul { margin-left:18px; }

  .pill { display:inline-block; font-size:12px; padding:3px 8px; border:1px solid #e5e7eb; border-radius:999px; background:#fff; color:#4b5563; margin-left:8px; }

  footer { margin-top:40px; padding-top:16px; border-top:1px solid #e5e7eb; font-size:12px; color:#4b5563; line-height:1.5; }
</style>
</head>

<body>

<h1>Teste clínico – Assincronias Ventilatórias</h1>
<p>
  1) Selecione o <b>tipo de ciclo</b>. 2) Marque os achados e, quando aplicável, especifique “onde”.
  O motor descreve o <b>sinal visual</b>, sugere hipóteses e organiza um <b>resumo executivo</b>.
</p>

<!-- CONTEXTO DO CICLO -->
<div class="card">
  <label>Contexto do ciclo observado <span class="pill">Obrigatório</span></label>
  <div class="legend">
    A leitura dos sinais depende se o traçado é mandatário (a tempo), assistido (disparado pelo paciente) ou misto.
  </div>
  <div class="radio-line">
    <label><input type="radio" name="tipoCiclo" value="mandatorio" /> Mandatório (a tempo)</label>
    <label><input type="radio" name="tipoCiclo" value="assistido" /> Assistido (disparado pelo paciente)</label>
    <label><input type="radio" name="tipoCiclo" value="misto" /> Misto (mandatórios + assistidos)</label>
    <label><input type="radio" name="tipoCiclo" value="nao_sei" /> Não sei</label>
  </div>
</div>

<!-- Degrau expiratório -->
<div class="card">
  <label><input type="checkbox" id="degrauExp"> Degrau expiratório <span class="pill">Curva de fluxo</span></label>
  <div class="legend">
    <b>Sinal visual:</b> entalhe/degrau (quebra de inclinação) no <b>ramo expiratório</b>, interrompendo a queda suave do fluxo expiratório.
  </div>
  <div class="controls" id="ctl_degrauExp">
    Parte da expiração:
    <select id="degrauExp_local">
      <option value="início">Início</option>
      <option value="meio">Meio</option>
      <option value="final">Final</option>
    </select>
  </div>
</div>

<!-- Pico inspiratório abaulado -->
<div class="card">
  <label><input type="checkbox" id="picoAbaulado"> Pico inspiratório abaulado <span class="pill">Curva de fluxo</span></label>
  <div class="legend">
    <b>Sinal visual:</b> pico de fluxo inspiratório <b>arredondado/abaulado</b> (pico “sem ponta”), sugerindo dificuldade em sustentar o fluxo entregue.
  </div>
</div>

<!-- Abaulamento do platô de fluxo inspiratório -->
<div class="card">
  <label><input type="checkbox" id="abaulamentoPlatoFluxo"> Abaulamento do platô de fluxo inspiratório <span class="pill">Curva de fluxo</span></label>
  <div class="legend">
    <b>Sinal visual:</b> durante a inspiração, em vez de platô estável/declínio esperado, observa-se <b>abaulamento no “platô”</b>
    (fluxo “volta a subir” ou forma uma barriga no meio da inspiração).
  </div>
  <div class="controls" id="ctl_abaulamentoPlatoFluxo">
    Onde ocorre mais?
    <select id="abaulamentoPlato_local">
      <option value="no início da inspiração">No início da inspiração</option>
      <option value="no meio da inspiração">No meio da inspiração</option>
      <option value="no final da inspiração">No final da inspiração</option>
    </select>
  </div>
</div>

<!-- Ciclagem precoce -->
<div class="card">
  <label><input type="checkbox" id="ciclagemPrecoce"> Ciclagem precoce <span class="pill">Curva de fluxo</span></label>
  <div class="legend">
    <b>Sinal visual da assincronia:</b> a inspiração termina com <b>fluxo inspiratório ainda positivo</b> (não chega próximo de zero).
  </div>
</div>

<!-- Ciclagem tardia -->
<div class="card">
  <label><input type="checkbox" id="ciclagemTardia"> Ciclagem tardia <span class="pill">Curva de fluxo</span></label>
  <div class="legend">
    <b>Sinal visual da assincronia:</b> o ventilador mantém inspiração apesar do fluxo inspiratório já ter atingido <b>~zero</b>.
  </div>
</div>

<!-- Letra M -->
<div class="card">
  <label><input type="checkbox" id="letraM"> Letra M (entalhe no platô) <span class="pill">Curva de pressão</span></label>
  <div class="legend">
    <b>Sinal visual:</b> no platô inspiratório da pressão, há um <b>entalhe/queda parcial</b> no meio, com retorno da pressão,
    formando um <b>“M”</b>. <b>Não</b> é “dois topos” e <b>não</b> corresponde a ciclos duplos.
  </div>
</div>

<!-- Concavidade no fluxo -->
<div class="card">
  <label><input type="checkbox" id="concavidade"> Concavidade no fluxo <span class="pill">Curva de fluxo</span></label>
  <div class="legend">
    <b>Sinal visual:</b> a curva “afunda” (concava) onde se esperaria trajetória mais linear/suave, sugerindo modulação por esforço/demanda.
  </div>
  <div class="controls" id="ctl_concavidade">
    Onde aparece?
    <select id="concavidade_fase">
      <option value="inspiração">Inspiração</option>
      <option value="expiração">Expiração</option>
    </select>
    <select id="concavidade_local">
      <option value="no início">No início</option>
      <option value="no meio">No meio</option>
      <option value="no final">No final</option>
    </select>
  </div>
</div>

<!-- Convexidade no fluxo -->
<div class="card">
  <label><input type="checkbox" id="convexidade"> Convexidade no fluxo <span class="pill">Curva de fluxo</span></label>
  <div class="legend">
    <b>Sinal visual:</b> a curva “abaula para fora” (convexa) na fase selecionada, sugerindo padrão mais imposto/assistido (dependente do modo).
  </div>
  <div class="controls" id="ctl_convexidade">
    Onde aparece?
    <select id="convexidade_fase">
      <option value="inspiração">Inspiração</option>
      <option value="expiração">Expiração</option>
    </select>
    <select id="convexidade_local">
      <option value="no início">No início</option>
      <option value="no meio">No meio</option>
      <option value="no final">No final</option>
    </select>
  </div>
</div>

<!-- Fluxo expiratório tremido -->
<div class="card">
  <label><input type="checkbox" id="fluxoTremidoExp"> Curva de fluxo expiratório “tremida” <span class="pill">Curva de fluxo</span></label>
  <div class="legend">
    <b>Sinal visual:</b> irregularidade/serrilhado/“tremor” no <b>ramo expiratório</b>, com pequenas oscilações repetidas durante a expiração.
    <br><b>Interpretação típica:</b> presença de secreções/condensado/interferência no tubo/circuito (correlacionar com ausculta e aspiração).
  </div>
</div>

<!-- Sinal de raiz quadrada -->
<div class="card">
  <label><input type="checkbox" id="raizQuadrada"> “Sinal de raiz quadrada” <span class="pill">Resistência de via aérea</span></label>
  <div class="legend">
    <b>Sinal visual:</b> traçado com aspecto “quadrado/achatado” compatível com <b>limitação ao fluxo</b> (padrão clássico associado a aumento de resistência das vias aéreas).
    <br><b>Interpretação típica:</b> aumento de resistência de via aérea, compatível com broncoespasmo/obstrução (correlacionar com sibilância, pico de pressão, secreções e clínica).
  </div>
</div>

<!-- Spike (pressão) - saída -->
<div class="card">
  <label><input type="checkbox" id="spikeSaida"> Spike (na saída) <span class="pill">Curva de pressão</span></label>
  <div class="legend">
    <b>Sinal visual:</b> espícula/pico transitório curto de pressão no <b>fim da inspiração</b>, na transição para expiração (saída/ciclagem).
  </div>
</div>

<!-- Overshoot (pressão) - entrada ou saída -->
<div class="card">
  <label><input type="checkbox" id="overshoot"> Overshoot (pressão) <span class="pill">Curva de pressão</span></label>
  <div class="legend">
    <b>Sinal visual:</b> excesso transitório de pressão acima do alvo (“passa do ponto”), com retorno.
    Pode ocorrer na <b>entrada</b> (início da inspiração) ou na <b>saída</b> (fim/ciclagem) — e os significados diferem.
  </div>
  <div class="controls" id="ctl_overshoot">
    Overshoot ocorre em:
    <div class="radio-line">
      <label><input type="radio" name="ov_tipo" value="entrada" checked /> Entrada (início / rise time)</label>
      <label><input type="radio" name="ov_tipo" value="saida" /> Saída (fim / ciclagem)</label>
    </div>
  </div>
</div>

<!-- Degrau recorrente pós-aspiração -->
<div class="card">
  <label><input type="checkbox" id="degrauRecorrente"> Degrau recorrente pós-aspiração <span class="pill">Curva de fluxo</span></label>
  <div class="legend">
    <b>Sinal visual:</b> degraus repetidos no fluxo após aspiração, sugerindo fator persistente (secreção/obstrução parcial) em vez de achado isolado.
  </div>
</div>

<button onclick="rodarAnalise()">Rodar análise</button>

<div class="resultado" id="resultado"></div>

<!-- RESUMO EXECUTIVO (novo) -->
<div class="card" id="resumoExecutivo" style="display:none;">
  <label>Resumo executivo</label>
  <div class="legend">
    Síntese dos principais sinais visuais e das hipóteses mais prováveis, considerando o contexto do ciclo selecionado.
  </div>

  <div class="detalhes">
    <p><b>Principais sinais visuais identificados:</b></p>
    <ul id="listaSinais"></ul>

    <p style="margin-top:10px;"><b>Hipóteses mais prováveis:</b></p>
    <ul id="listaHipoteses"></ul>
  </div>
</div>

<div class="detalhes" id="detalhes"></div>

<script>
  // Controles condicionais
  const toggles = [
    ["degrauExp", "ctl_degrauExp"],
    ["concavidade", "ctl_concavidade"],
    ["convexidade", "ctl_convexidade"],
    ["overshoot", "ctl_overshoot"],
    ["abaulamentoPlatoFluxo", "ctl_abaulamentoPlatoFluxo"]
  ];

  toggles.forEach(([cbId, ctlId]) => {
    const cb = document.getElementById(cbId);
    const ctl = document.getElementById(ctlId);
    cb.addEventListener("change", () => {
      ctl.style.display = cb.checked ? "block" : "none";
    });
  });

  function getTipoCiclo() {
    const el = document.querySelector('input[name="tipoCiclo"]:checked');
    return el ? el.value : null;
  }

  function valRadio(name){
    const el = document.querySelector(`input[name="${name}"]:checked`);
    return el ? el.value : null;
  }

  function labelTipoCiclo(v){
    if (v === "mandatorio") return "Mandatório (a tempo)";
    if (v === "assistido") return "Assistido (disparado pelo paciente)";
    if (v === "misto") return "Misto (mandatórios + assistidos)";
    if (v === "nao_sei") return "Não informado / não sei";
    return "Não selecionado";
  }

  function unique(arr) {
    const seen = new Set();
    const out = [];
    arr.forEach(x => {
      const k = String(x).trim();
      if (!k) return;
      if (!seen.has(k)) { seen.add(k); out.push(k); }
    });
    return out;
  }

  function rodarAnalise() {
    const tipoCiclo = getTipoCiclo();
    const achados = [];
    const sinais = [];
    const hipoteses = [];

    const resumoBox = document.getElementById("resumoExecutivo");
    const listaSinais = document.getElementById("listaSinais");
    const listaHipoteses = document.getElementById("listaHipoteses");

    if (!tipoCiclo) {
      resultado.innerHTML = "Selecione o tipo de ciclo (mandatório, assistido, misto ou não sei) antes de rodar a análise.";
      detalhes.innerHTML = "";
      resumoBox.style.display = "none";
      return;
    }

    const conservador = (tipoCiclo === "nao_sei");
    const misto = (tipoCiclo === "misto");

    function notaContexto(extra) {
      if (conservador) return "Interpretação conservadora (tipo de ciclo não informado). " + extra;
      if (misto) return "Ciclos mistos podem combinar padrões diferentes no mesmo traçado. " + extra;
      return extra;
    }

    if (degrauExp.checked) {
      const local = document.getElementById("degrauExp_local").value;

      sinais.push(`Entalhe/degrau no ramo expiratório (${local}).`);
      hipoteses.push("Alteração do esvaziamento expiratório (auto-PEEP, dinâmica expiratória desfavorável ou esforço expiratório ativo).");

      achados.push(
        `Degrau expiratório (fluxo) → entalhe no ramo expiratório (${local}). ` +
        notaContexto("Sugere alteração do esvaziamento expiratório.")
      );
    }

    if (picoAbaulado.checked) {
      sinais.push("Pico inspiratório arredondado/abaulado no fluxo.");
      hipoteses.push("Dificuldade em manter fluxo entregue: aumento de resistência/obstrução parcial ou demanda maior que o fluxo ofertado (dependente do modo).");

      achados.push(
        `Pico inspiratório abaulado (fluxo) → pico inspiratório arredondado. ` +
        notaContexto("Sugere dificuldade em entregar/manter fluxo.")
      );
    }

    if (abaulamentoPlatoFluxo.checked) {
      const local = document.getElementById("abaulamentoPlato_local").value;

      sinais.push(`Abaulamento (“barriga”) no platô/trecho inspiratório do fluxo (${local}).`);
      hipoteses.push("Demanda inspiratória variável durante a inspiração; compatível com fome de fluxo/fluxo insuficiente em parte do ciclo ou instabilidade de entrega (dependente do modo e ajustes).");

      achados.push(
        `Abaulamento do platô de fluxo inspiratório → re-elevação/abaulamento do fluxo (${local}). ` +
        notaContexto("Sugere demanda inspiratória variável (compatível com fome de fluxo em parte do ciclo) ou instabilidade de entrega, dependendo do modo.")
      );
    }

    if (ciclagemPrecoce.checked) {
      sinais.push("Fim da inspiração com fluxo inspiratório ainda positivo (não zera).");
      hipoteses.push("Ciclagem precoce: ventilador termina a inspiração antes da demanda do paciente (critério/tempo inspiratório curto).");

      achados.push(
        `Ciclagem precoce (fluxo) → inspiração termina com fluxo ainda positivo. ` +
        notaContexto("Assincronia por término inspiratório antes da demanda do paciente.")
      );
    }

    if (ciclagemTardia.checked) {
      sinais.push("Inspiração mantida apesar de fluxo inspiratório ~zero.");
      hipoteses.push("Ciclagem tardia: inspiração prolongada além do desejado, podendo gerar esforço expiratório ativo (critério/tempo inspiratório longo).");

      achados.push(
        `Ciclagem tardia (fluxo) → inspiração prolongada após fluxo ~zero. ` +
        notaContexto("Assincronia por permanência inspiratória além do desejado.")
      );
    }

    if (letraM.checked) {
      sinais.push("Entalhe no platô inspiratório da pressão formando “M”.");
      hipoteses.push("Interferência de esforço durante a fase inspiratória (demanda variável ao longo do platô), mesmo podendo ocorrer em ciclos mandatórios.");

      const extra = (tipoCiclo === "mandatorio")
        ? "Mesmo em ciclos mandatórios, pode haver interferência de esforço do paciente durante a fase inspiratória, deformando o platô."
        : "Sugere interferência de esforço durante a fase inspiratória (demanda variável ao longo do platô).";

      achados.push(`Letra M (pressão) → entalhe no platô formando “M”. ${notaContexto(extra)}`);
    }

    if (concavidade.checked) {
      const fase = document.getElementById("concavidade_fase").value;
      const local = document.getElementById("concavidade_local").value;

      sinais.push(`Concavidade (“afundamento”) no fluxo na ${fase} (${local}).`);
      hipoteses.push("Modulação do fluxo por esforço/demanda do paciente na fase indicada (interpretar com pressão/volume e modo ventilatório).");

      achados.push(
        `Concavidade no fluxo → concavidade na ${fase} (${local}). ` +
        notaContexto("Sugere modulação do fluxo por esforço/demanda do paciente naquela fase.")
      );
    }

    if (convexidade.checked) {
      const fase = document.getElementById("convexidade_fase").value;
      const local = document.getElementById("convexidade_local").value;

      sinais.push(`Convexidade (abaulamento para fora) no fluxo na ${fase} (${local}).`);
      hipoteses.push("Padrão mais imposto/assistido; pode sugerir sobreassistência dependendo do contexto e modo.");

      achados.push(
        `Convexidade no fluxo → convexidade na ${fase} (${local}). ` +
        notaContexto("Sugere padrão mais imposto/assistido; pode ocorrer em sobreassistência dependendo do contexto.")
      );
    }

    if (fluxoTremidoExp.checked) {
      sinais.push("Serrilhado/oscilações repetidas no ramo expiratório do fluxo.");
      hipoteses.push("Secreções, condensado ou interferência no tubo/circuito (correlacionar com ausculta e aspiração).");

      achados.push(
        `Fluxo expiratório “tremido” → serrilhado/oscilações no ramo expiratório. ` +
        notaContexto("Sugere secreções/condensado/interferência no sistema.")
      );
    }

    if (raizQuadrada.checked) {
      sinais.push("Padrão compatível com limitação ao fluxo (aspecto em “raiz quadrada”).");
      hipoteses.push("Aumento de resistência de vias aéreas (compatível com broncoespasmo/obstrução), correlacionar com clínica e pressões.");

      achados.push(
        `“Sinal de raiz quadrada” → padrão de limitação ao fluxo / aumento de resistência. ` +
        notaContexto("Compatível com aumento de resistência de via aérea, incluindo broncoespasmo/obstrução.")
      );
    }

    if (spikeSaida.checked) {
      sinais.push("Espícula/pico curto de pressão no fim da inspiração (saída/ciclagem).");
      hipoteses.push("Transição para expiração abrupta/instabilidade na ciclagem; correlacionar com modo e ajustes de término/ciclagem.");

      achados.push(
        `Spike (saída, pressão) → espícula no fim da inspiração (ciclagem para expiração). ` +
        notaContexto("Sugere transição abrupta/instabilidade na ciclagem; interpretar com modo e ajustes de término.")
      );
    }

    if (overshoot.checked) {
      const tipo = valRadio("ov_tipo") || "entrada";
      if (tipo === "entrada") {
        sinais.push("Overshoot de pressão na entrada: excede o alvo no início da inspiração e retorna.");
        hipoteses.push("Subida muito agressiva (rise time curto) ou resposta oscilatória do sistema (complacência/resistência/circuito).");

        achados.push(
          `Overshoot (entrada, pressão) → excede o alvo no início da inspiração e retorna. ` +
          notaContexto("Frequentemente relacionado a subida muito agressiva (rise time curto) ou resposta oscilatória do sistema.")
        );
      } else {
        sinais.push("Overshoot de pressão na saída: excede o alvo no fim da inspiração/na ciclagem e retorna.");
        hipoteses.push("Instabilidade na troca de fase (fim/ciclagem), término abrupto ou interação com esforço do paciente no fim da inspiração.");

        achados.push(
          `Overshoot (saída, pressão) → excede o alvo no fim da inspiração/na ciclagem e retorna. ` +
          notaContexto("Pode refletir instabilidade na troca de fase, término abrupto ou interação com esforço no fim da inspiração.")
        );
      }
    }

    if (degrauRecorrente.checked) {
      sinais.push("Degraus repetidos no fluxo após aspiração (padrão recorrente).");
      hipoteses.push("Fator persistente: secreção/obstrução parcial/patência do tubo (correlacionar com pressões, ausculta e clínica).");

      achados.push(
        `Degrau recorrente pós-aspiração (fluxo) → degraus repetidos após aspiração. ` +
        notaContexto("Sugere fator persistente (secreção/obstrução parcial/patência do tubo) e merece correlação clínica.")
      );
    }

    // Saídas
    if (achados.length === 0) {
      resultado.innerHTML = `Contexto do ciclo: ${labelTipoCiclo(tipoCiclo)}. Nenhum achado selecionado.`;
      detalhes.innerHTML = "";
      resumoBox.style.display = "none";
      return;
    }

    // Resultado principal
    resultado.innerHTML = `Contexto do ciclo: ${labelTipoCiclo(tipoCiclo)}. Interpretação sugerida:`;
    detalhes.innerHTML = "<ul><li>" + achados.join("</li><li>") + "</li></ul>";

    // Resumo executivo (deduplicado)
    const sinaisU = unique(sinais);
    const hipU = unique(hipoteses);

    resumoBox.style.display = "block";
    listaSinais.innerHTML = "<li>" + sinaisU.join("</li><li>") + "</li>";
    listaHipoteses.innerHTML = "<li>" + hipU.join("</li><li>") + "</li>";
  }
</script>

<footer>
  <p>
    <strong>Aviso educacional:</strong><br>
    Este material tem finalidade exclusivamente educacional e de apoio ao raciocínio clínico.
    Não substitui a avaliação individual do paciente, o julgamento do profissional de saúde
    ou protocolos institucionais. As interpretações devem sempre ser correlacionadas com o
    contexto clínico e ventilatório.
  </p>

  <p>
    <strong>Autoria:</strong> Leticia Moreira.<br>
    © 2026 Leticia Moreira – Todos os direitos reservados.<br>
    Uso permitido para fins educacionais e não comerciais, com citação da autora.
    É vedada a reprodução, distribuição ou modificação para fins comerciais sem autorização expressa.
  </p>
</footer>

</body>
</html>
