<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8" />
<title>Assincronias Ventilatórias – Ferramenta Educacional</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>

<style>
body {
  font-family: Arial, Helvetica, sans-serif;
  background:#f6f7f8;
  margin:0;
  padding:20px;
}
h1 { font-size:22px; margin-bottom:5px; }
h2 { font-size:18px; margin-top:25px; }
.card {
  background:#fff;
  border-radius:6px;
  padding:15px;
  margin-bottom:15px;
  box-shadow:0 1px 4px rgba(0,0,0,.08);
}
.legend { font-size:13px; color:#444; margin-top:6px; }
.muted { font-size:12px; color:#666; }
.row { display:flex; gap:10px; flex-wrap:wrap; }
.grid { display:grid; grid-template-columns:repeat(auto-fit,minmax(220px,1fr)); gap:10px; }
button {
  padding:10px 16px;
  font-size:15px;
  cursor:pointer;
}
select, input[type="number"] {
  width:100%;
  padding:6px;
}
.resultado { margin-top:15px; }
ul { margin-top:5px; }
footer {
  margin-top:30px;
  font-size:12px;
  color:#555;
  border-top:1px solid #ddd;
  padding-top:10px;
}
</style>
</head>

<body>

<h1>Assincronias Ventilatórias</h1>
<p class="muted">
Ferramenta educacional para apoio à interpretação das curvas do ventilador.
</p>

<!-- ================= CONTEXTO ================= -->
<div class="card">
  <label><b>Tipo de ciclo predominante</b></label>
  <select id="tipoCiclo">
    <option value="">Selecione</option>
    <option value="mandatorio">Mandatório (a tempo)</option>
    <option value="assistido">Assistido</option>
    <option value="misto">Misto</option>
    <option value="indefinido">Não sei</option>
  </select>

  <div style="margin-top:10px;">
    <label><b>Auto-PEEP medida (cmH₂O) – se disponível</b></label>
    <input type="number" id="autoPeepValor" min="0" step="0.5" placeholder="Opcional"/>
  </div>
</div>

<!-- ================= ACHADOS VISUAIS ================= -->
<h2>Achados visuais nas curvas</h2>

<div class="card">
  <label><input type="checkbox" id="expNaoZera">
  Expiração não atinge zero antes do próximo ciclo</label>
  <div class="legend">
    Curva de fluxo expiratório não retorna à linha de base antes do início da próxima inspiração.
    Sinal forte de hiperinsuflação dinâmica / auto-PEEP.
  </div>
</div>

<div class="card">
  <label><input type="checkbox" id="degrauExp">
  Degrau / entalhe na fase expiratória</label>
  <div class="legend">
    Alteração no ramo expiratório podendo indicar auto-PEEP, esforço expiratório ativo ou interação paciente–ventilador.
  </div>
</div>

<div class="card">
  <label><input type="checkbox" id="fluxoTremido">
  Fluxo expiratório tremido / serrilhado</label>
  <div class="legend">
    Oscilações irregulares no fluxo expiratório, compatíveis com secreção ou condensado.
  </div>
</div>

<div class="card">
  <label><input type="checkbox" id="raizQuadrada">
  Padrão em “raiz quadrada” no fluxo</label>
  <div class="legend">
    Fluxo limitado e sustentado, sugerindo aumento de resistência de vias aéreas, compatível com broncoespasmo.
  </div>
</div>

<div class="card">
  <label><input type="checkbox" id="picoAbaulado">
  Pico ou platô de fluxo inspiratório abaulado</label>
  <div class="legend">
    Aumento secundário do fluxo durante a inspiração, sugerindo fome de fluxo.
  </div>
</div>

<div class="card">
  <label><input type="checkbox" id="letraM">
  Entalhe no platô de pressão (Letra M)</label>
  <div class="legend">
    Queda parcial da pressão no meio do platô inspiratório, formando padrão em “M”.
  </div>
</div>

<div class="card">
  <label><input type="checkbox" id="segundoEsforco">
  Segundo esforço inspiratório durante a inspiração mandatória</label>
  <div class="legend">
    Esforço do paciente ocorre dentro da mesma inspiração, sem gerar novo ciclo.
  </div>
</div>

<div class="card">
  <label><input type="checkbox" id="cicloDuplo">
  Ciclo duplo (double triggering)</label>
  <div class="legend">
    Dois ciclos consecutivos separados por expiração mínima.
  </div>
</div>

<!-- ================= MANUAIS ================= -->
<h2>Manuais – Onde encontrar os ajustes</h2>

<div class="card">
  <div class="legend">
    Orientação para localizar ajustes nos ventiladores, com base nos manuais oficiais.
    Não substitui treinamento nem protocolos institucionais.
  </div>

  <div class="grid" style="margin-top:10px;">
    <div>
      <div class="muted">Ventilador</div>
      <select id="manualVent">
        <option value="">Selecione</option>
        <option value="ge">GE – CARESCAPE R860</option>
        <option value="pb">Puritan Bennett – PB840 / PB980</option>
        <option value="vela">Vela</option>
        <option value="luftung">Lüftung</option>
        <option value="draeger">Dräger – Evita</option>
        <option value="servo">Maquet / Getinge – Servo i / u</option>
      </select>
    </div>

    <div>
      <div class="muted">Objetivo</div>
      <select id="manualObjetivo">
        <option value="">Selecione</option>
        <option value="autopeep">Auto-PEEP / tempo expiratório</option>
        <option value="trigger">Trigger / threshold load</option>
        <option value="ciclagem">Ciclagem</option>
        <option value="rise">Rise / pressurização</option>
      </select>
    </div>
  </div>

  <button style="margin-top:12px;" onclick="mostrarManual()">Mostrar onde procurar</button>
  <div id="manualResultado" class="legend" style="margin-top:10px;"></div>
</div>

<!-- ================= AÇÕES ================= -->
<div class="row">
  <button onclick="rodarAnalise()">Rodar análise</button>
</div>

<!-- ================= RESULTADO ================= -->
<div class="resultado card" id="resultado"></div>

<script>
function rodarAnalise() {
  const sinais = [];
  const assincronias = [];
  const correcoes = [];

  const tipo = tipoCiclo.value;
  const peepVal = parseFloat(autoPeepValor.value);

  if (expNaoZera.checked) {
    sinais.push("Expiração não atinge zero antes do próximo ciclo.");
    assincronias.push("Auto-PEEP / hiperinsuflação dinâmica");
    correcoes.push("Aumentar tempo expiratório (reduzir FR ou Ti conforme o modo) e tratar fatores que aumentem resistência ou demanda ventilatória.");
  }

  if (degrauExp.checked) {
    sinais.push("Degrau/entalhe na fase expiratória.");
  }

  if (fluxoTremido.checked) {
    sinais.push("Fluxo expiratório tremido.");
    correcoes.push("Avaliar presença de secreções ou condensado e revisar higiene brônquica.");
  }

  if (raizQuadrada.checked) {
    sinais.push("Fluxo com padrão em raiz quadrada.");
    assincronias.push("Aumento de resistência de vias aéreas");
    correcoes.push("Avaliar broncoespasmo e otimizar broncodilatação conforme prescrição.");
  }

  if (picoAbaulado.checked) {
    sinais.push("Abaulamento do fluxo inspiratório.");
    assincronias.push("Fome de fluxo");
    correcoes.push("Ajustar oferta de fluxo ou pressurização (rise) para atender à demanda inspiratória.");
  }

  if (letraM.checked || segundoEsforco.checked) {
    assincronias.push("Disparo reverso provável (sem duplo disparo)");
    correcoes.push("Reavaliar ciclos mandatórios (FR, Ti) e conforto; considerar entrainment paciente–ventilador.");
  }

  if (cicloDuplo.checked) {
    assincronias.push("Double triggering");
  }

  if ((expNaoZera.checked || degrauExp.checked) && (tipo === "assistido" || tipo === "misto")) {
    assincronias.push("Threshold load aumentado");
    correcoes.push("Auto-PEEP aumenta a carga limiar para disparo (threshold load). Considerar PEEP externa para facilitar o disparo.");
    if (!isNaN(peepVal)) {
      correcoes.push("PEEP externa pode ser titulada em ~75–80% da auto-PEEP medida, com monitorização da PEEP total.");
    }
  }

  let html = "<b>Sinais observados:</b><ul>";
  sinais.forEach(s => html += "<li>" + s + "</li>");
  html += "</ul>";

  if (assincronias.length) {
    html += "<b>Assincronias sugeridas:</b><ul>";
    [...new Set(assincronias)].forEach(a => html += "<li>" + a + "</li>");
    html += "</ul>";
  }

  if (correcoes.length) {
    html += "<b>Resumo de correção (educacional):</b><ul>";
    [...new Set(correcoes)].forEach(c => html += "<li>" + c + "</li>");
    html += "</ul>";
  }

  resultado.innerHTML = html;
}

function mostrarManual() {
  const vent = manualVent.value;
  const obj = manualObjetivo.value;
  const out = manualResultado;

  if (!vent || !obj) {
    out.innerHTML = "Selecione o ventilador e o objetivo.";
    return;
  }

  out.innerHTML =
    "<b>Onde procurar no ventilador:</b> menus de parâmetros do modo, trigger/sensibilidade, ciclagem ou pressurização.<br>" +
    "<b>Termos úteis no manual:</b> trigger, sensitivity, cycling, ETS, intrinsic PEEP.<br>" +
    "<a href='#' onclick='return false;'>Consultar manual oficial do fabricante</a>";
}
</script>

<footer>
<b>Autoria:</b> Leticia Moreira<br/>
Material educacional. Não substitui decisão clínica, protocolos institucionais ou treinamento formal.<br/>
© 2026 – Uso educacional.
</footer>

</body>
</html>
